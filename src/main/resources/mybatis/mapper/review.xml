<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.skkcandle.dao.reviewDao">
	<!-- <insert id="insert" parameterType="Review">
		insert into review (reviewId, productId, userId, reviewTitle, reviewDate, ratingScore, reviewContent)
		values(#{reviewId}, #{productId}, #{userId}, #{reviewTitle}, sysdate, 0, #{reviewContent})
	</insert> -->
	
	<select id="selectReview" parameterType="int" resultType="Review">
		select reviewId, productId, userId, reviewTitle, reviewDate, ratingScore, reviewContent
		from review
		where productId = #{productId}
	</select>
	
	<select id="selectReviewByUserId" parameterType="int" resultType="Review">
		select reviewId, productId, userId, reviewTitle, reviewDate, ratingScore, reviewContent
		from review
		where userId = #{userId}
	</select>
	
	<select id="count" resultType="int">
		select count(*) from review
		where productId = #{productId}	
	</select>
	
	   <!-- reusltType 조회 결과 값을 저장하기 위한 데이터 타입, parameterType : 전달받은 파라미터 데이터 타입 지정 -->
  <select id="selectByPage" parameterType="Pager" resultType="review"> <!--resultType =(무슨 타입으로 내보내고 싶다), select 된 값을 반환할 빈 그릇 -->
	  <![CDATA[
	  select rnum, reviewId, productId, userId, reviewTitle, reviewDate, ratingScore, reviewContent
	      from (
	         select rownum as rnum, reviewId, reviewTitle, userId, reviewDate, ratingScore, reviewContent
	         from (
	            select reviewId, reviewTitle, userId, reviewDate, ratingScore, reviewContent
	            from review
	            order by bno desc
	         )
	         where rownum <= #{endRowNo}
	      )
	      where rnum >= #{startRowNo}
	      ]]>
   </select>
	
</mapper> <!-- 리뷰 작업으로 인한 주석처리 -->




